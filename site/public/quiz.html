<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quiz</title>
    <link rel="icon" href="./img/Logo_definitiva.png  " />
    <link rel="stylesheet" href="./css/quiz.css" />
  </head>
  <body onload="Quiz()">
    <div class="header">
      <div class="header_h1">
        <h1 onclick="VerGrafico()">Gráficos</h1>
        <h1 onclick="VerHome()">Home</h1>
        <h1 onclick="VerLer()">Ler sobre</h1>
      </div>
    </div>
    <!-- Reorganização da tela quiz -->
    <div class="numeracao" id="numero_questao">
      <div class="pergunta_number" id="questao">
        <h2> Quiz de história geral</h2>
      </div>
    </div>
    <div class="container" id="caixa_pai">
      <div class="main"  id="perg_resp">
        <div class="perguntas" id="container_perguntas">
          <h2 id="pergunta_quiz">
          </h2>
        </div>
        <div class="respostas" id="respostas_usuario">
          <input type="text" id="ipt_resposta">
          <button onclick="Responder()" id="btn_validar">
            Validar
          </button>
        </div>
        </div>
      </div>
      <!-- Criação do botão de iniciar quiz -->
    </div>
    <div class="footer"></div>
  </body>
</html>

    <script>
var i = 0;
var erro = 0;
var acerto = 0
      function Quiz(){
        var questoes = [
    "Quem é o primeiro presidente dos Estados Unidos?",
    "Qual foi o período conhecido como a Idade de Ouro de Roma?",
    "Qual foi o cientista responsável por liderar o projeto Manhathan?",
    "Onde é o país natal de Joana d Arc?",
    "Quem foi o primeiro homem a pisar na lua?",
    "Qual país teve um período chamado ' O século da humilhação'?",
    "Qual país realizou o Brexit?",
    "Qual o país conhecido como cemitério de Impérios?",
    "Imperador romano responsável pela construção do Coliseu?",
    "Qual o jornalista que sofreu um atentado do guarda-costas de Getúlio Vargas"
  ];
          if(i == 0){
            pergunta_quiz.innerHTML = `${questoes[i]}`
            console.log(i)
          }
          if(i == 1){
            pergunta_quiz.innerHTML = `${questoes[i]}`
            console.log(i)
          }
          if(i == 2){
            pergunta_quiz.innerHTML = `${questoes[i]}`
            console.log(i)
         }
         if(i == 3){
            pergunta_quiz.innerHTML = `${questoes[i]}`
            console.log(i)
          }
          if(i == 4){
            pergunta_quiz.innerHTML = `${questoes[i]}`
            console.log(i)
          }
          if(i == 5){
            pergunta_quiz.innerHTML = `${questoes[i]}`
            console.log(i)
          }
          if(i == 6){
            pergunta_quiz.innerHTML = `${questoes[i]}`
            console.log(i)
          }
          if(i == 7){
            pergunta_quiz.innerHTML = `${questoes[i]}`
            console.log(i)
          }
          if(i == 8){
            pergunta_quiz.innerHTML = `${questoes[i]}`
            console.log(i)
          }
          if(i == 9){
            pergunta_quiz.innerHTML = `${questoes[i]}`
            console.log(i)
          }
          if(i == 10){
            btn_validar.style.display = 'none'
            container_perguntas.style.heigth = '50%';
            container_perguntas.style.width = '80%'
            pergunta_quiz.innerHTML = `<img src="https://media.tenor.com/lc4BrNeVGnMAAAAC/uau-whoa.gif">`
            ipt_resposta.style.display = 'none'
            enviar()
          }
      }
      function Responder(){
        var respostas = [
    "GEORGE WASHINGTON",
    "IMPÉRIO",
    "ROBERT OPPENHEIMER",
    "FRANÇA",
    "NEIL ARMSTRONG",
    "CHINA",
    "REINO UNIDO",
    "AFEGANISTÃO",
    "VESPASIANO",
    "CARLOS LACERDA"
];
        var ax_resposta = ipt_resposta.value;
        if(ax_resposta == ''){
          alert('Insira sua resposta!')
        } 
        else if(respostas.includes(ax_resposta.toUpperCase()) == false)
        {
          erro++
          i++
        }else{
          acerto++
          i++
        }
        Quiz()
      }

      function enviar(){
        var idUsuario = sessionStorage.ID_USUARIO;
        console.log('Estou no fetch do REGISTRAR')
        fetch(`/registro/registrar/${idUsuario}`,{
              method: "POST",
              headers: {
                "Content-Type": "application/json"
              },
              body: JSON.stringify({
                acertoServer: acerto,
                erroServer : erro
              }),
            })
             console.log('entrando no then do REGISTAR')
            .then(function (resposta){
              console.log('resposta',resposta);
                if(resposta.ok){
                  console.log('jonas')
                  setTimeout(() => {
            window.location = "graficos.html";
          }, "3000");
                }else{
                  console.log('deu ruim')
                }
            })
            .catch(function(resposta){
              console.log(`#ERRO: ${resposta}`);
            });
            return false
      }
    </script>

<script>  
  function VerGrafico() {
    location.href = "graficos.html";
  }
  function VerHome() {
    location.href = "home.html";
  }
  function VerLer() {
    location.href = "ler.html";
  }
</script>
